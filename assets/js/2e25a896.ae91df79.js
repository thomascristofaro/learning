"use strict";(self.webpackChunkthomascristofaro_learning=self.webpackChunkthomascristofaro_learning||[]).push([[1285],{28453:(e,i,r)=>{r.d(i,{R:()=>s,x:()=>t});var n=r(96540);const o={},a=n.createContext(o);function s(e){const i=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function t(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),n.createElement(a.Provider,{value:i},e.children)}},48415:(e,i,r)=>{r.r(i),r.d(i,{assets:()=>l,contentTitle:()=>t,default:()=>u,frontMatter:()=>s,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"business-central/al-language/error-transitions","title":"Errori e Transazioni","description":"Il linguaggio AL dispone di numerose funzionalit\xe0 di gestione degli errori che possono aiutarti a gestire le situazioni impreviste che si verificano durante l\'esecuzione del codice. Vedremo l\'utilizzo di questi metodi in AL per gestire gli errori che si verificano durante l\'esecuzione del codice, assicurandosi al contempo che l\'applicazione disponga di un\'interfaccia utente coerente.","source":"@site/docs/business-central/03-al-language/05-error-transitions.md","sourceDirName":"business-central/03-al-language","slug":"/business-central/al-language/error-transitions","permalink":"/learning/docs/business-central/al-language/error-transitions","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{},"sidebar":"businessCentralSidebar","previous":{"title":"Scrivere un record","permalink":"/learning/docs/business-central/al-language/write-record"},"next":{"title":"Procedure di Dialogo","permalink":"/learning/docs/business-central/al-language/dialog"}}');var o=r(74848),a=r(28453);const s={},t="Errori e Transazioni",l={},d=[{value:"Transazioni e Commit",id:"transazioni-e-commit",level:2},{value:"Error",id:"error",level:2},{value:"TestField",id:"testfield",level:3},{value:"FieldError",id:"fielderror",level:3},{value:"Strategie di gestione degli errori",id:"strategie-di-gestione-degli-errori",level:2},{value:"Link utili",id:"link-utili",level:2}];function c(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.header,{children:(0,o.jsx)(i.h1,{id:"errori-e-transazioni",children:"Errori e Transazioni"})}),"\n",(0,o.jsx)(i.p,{children:"Il linguaggio AL dispone di numerose funzionalit\xe0 di gestione degli errori che possono aiutarti a gestire le situazioni impreviste che si verificano durante l'esecuzione del codice. Vedremo l'utilizzo di questi metodi in AL per gestire gli errori che si verificano durante l'esecuzione del codice, assicurandosi al contempo che l'applicazione disponga di un'interfaccia utente coerente."}),"\n",(0,o.jsx)(i.p,{children:"Ci sono vari tipi di errori nel linguaggio AL:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Errori di Sintassi"}),": gli errori di sintassi si verificano quando il codice non rispetta le regole grammaticali del linguaggio. Ad esempio, potrebbe esserci un errore se una variabile viene dichiarata in modo errato o se mancano parentesi graffe in una struttura di controllo."]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Errori di Run-Time"}),": gli errori di run-time si verificano durante l'esecuzione del programma. Possono essere causati da situazioni impreviste, come una divisione per zero o un tentativo di accesso a un indice inesistente in un array."]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Errori Logici"}),": gli errori logici non sono errori sintattici o di run-time evidenti ma possono causare risultati indesiderati a causa di un ragionamento sbagliato nella logica del programma."]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Errori di Tipo"}),": gli errori di tipo si verificano quando si tenta di utilizzare una variabile o un valore di un tipo non corrispondente a quello previsto."]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Errori di Logica dei Dati"}),": gli errori di logica dei dati si verificano quando i dati trattati dal programma non sono conformi alle aspettative. Ci\xf2 pu\xf2 portare a risultati imprevisti e comportamenti errati."]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Errori di Concorrenza"}),": gli errori di concorrenza si verificano quando due o pi\xf9 parti del programma tentano di accedere o modificare le stesse risorse simultaneamente senza la dovuta sincronizzazione."]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Errori di Gestione delle Eccezioni"}),": gli errori di gestione delle eccezioni si verificano quando non vengono gestite correttamente le eccezioni o non viene fornita una gestione appropriata per scenari di errore specifici."]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Errori di Accesso a Dati"}),": gli errori di accesso a dati si verificano quando si tenta di leggere o scrivere dati in un database o in altre risorse dati e si verifica un problema, come una connessione persa o un'operazione non consentita."]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Errori di Personalizzazione"}),": gli errori specifici alle personalizzazioni possono verificarsi quando si estende o si modifica l'applicazione base."]}),"\n"]}),"\n",(0,o.jsxs)(i.p,{children:["Una transazione rappresenta un blocco di codice che esegue una serie di operazioni sul database come un'unit\xe0 atomica. Sono utilizzate per garantire la coerenza dei dati, cio\xe8 per assicurarsi che tutte le operazioni di database vengano eseguite con successo o che nessuna di esse venga eseguita affatto. Una transazione inizia con l'istruzione ",(0,o.jsx)(i.code,{children:"begin transaction"})," e pu\xf2 includere una serie di operazioni che vengono eseguite in modo atomico, cio\xe8 vengono considerate come un'unica unit\xe0 di lavoro che viene completata completamente come un'unica unit\xe0 di lavoro che viene completata completamente o annullata. Le transazioni sono spesse legate alle operazioni di database.\nQuindi, gli errori in AL possono derivare da problemi di sintassi, run-time e logica, mentre le transazioni sono spesso utilizzate per garantire la coerenza dei dati in operazioni complesse di database."]}),"\n",(0,o.jsx)(i.h2,{id:"transazioni-e-commit",children:"Transazioni e Commit"}),"\n",(0,o.jsx)(i.p,{children:"Ci sono due tipi di transazioni:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Operazioni Atomiche"}),": le transazioni in AL possono essere utilizzate per garantire che una serie di operazioni sul database vengano eseguite in modo atomico. Ci\xf2 significa che tutte le operazioni vengono eseguite con successo o nessuna viene eseguita affatto. Pu\xf2 essere utile in scenari in cui \xe8 necessario mantenere la coerenza dei dati."]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Commit e Rollback"}),': Gli sviluppatori AL possono utilizzare le istruzioni "commi" per applicare permanentemente le modifiche apportate al database e "rollback" per annullare tutte le modifiche apportate durante la transazioni corrente.\n',(0,o.jsx)(i.strong,{children:"Commit"})," delle transazioni:"]}),"\n",(0,o.jsxs)(i.li,{children:["L'istruzione ",(0,o.jsx)(i.strong,{children:"commit"})," viene utilizzata per applicare permanentemente le modifiche apportate al database all'interno di una transazione."]}),"\n",(0,o.jsxs)(i.li,{children:["Dopo aver eseguito tutte le operazioni di database all'interno della transazione e verificato che non ci siano errori, \xe8 possibile emettere l'istruzione ",(0,o.jsx)(i.code,{children:"rollback"})," per annullare tutte le operazioni non ancora confermate.\n\xc8 importante gestire attentamente le transazioni in modo da garantire l'integrit\xe0 dei dati nel database. Il commit dovrebbe essere eseguito solo se tutte le operazioni sono andate a buon fine, altrimenti \xe8 preferibile eseguire il rollback per annullare le modifiche."]}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"error",children:"Error"}),"\n",(0,o.jsx)(i.p,{children:"Se qualcosa va storto o alcune condizioni non vengono soddisfatte durante l'elaborazione del codice, puoi utilizzare il messaggio di errore per avvisare l'utente.\nQuando viene invocata una procedura error, l'esecuzione del processo corrente termina, il messaggio viene immediatamente visualizzato e il database torna allo stato che aveva dopo l'ultima procedura in errore non fosse mai stato eseguito."}),"\n",(0,o.jsxs)(i.p,{children:["`",(0,o.jsx)(i.strong,{children:"ErrorMessage"}),"' \xe8 il messaggio di errore da visualizzare. Pu\xf2 includere variabili o espressioni di testo. La virgola ('",(0,o.jsx)(i.strong,{children:"[,]"}),"') indica che \xe8 possibile fornire pi\xf9 argomenti se necessario.\nEsempio:"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-al",children:"var\n    AccountNo: Integer;\n    ErrorMessage: Text;\nbegin\n    AccountNo := 123;\n    // Creazione del messaggio di errore con l'uso di variabili\n    ErrorMessage := 'Account number ' + Format(AccountNo) + ' is not valid.';\n    // Chiamata alla funzione Error\n    Error(ErrorMessage);\nend;\n"})}),"\n",(0,o.jsxs)(i.p,{children:["Nell'esempio sopra, la funzione '",(0,o.jsx)(i.strong,{children:"Error"}),"' viene chiamata con un messaggio di errore costruito dinamicamente utilizzando la variabile '",(0,o.jsx)(i.strong,{children:"ErrorMessage"}),"'. Quando viene chiamata, il programma interrompe immediatamente l'esecuzione e visualizza il messaggio di errore fornito. \xc8 importante notare che l'uso della funzione '",(0,o.jsx)(i.strong,{children:"Error"}),"' dovrebbe essere attentamente considerato, poich\xe9 interrompe immediatamente l'esecuzione del programma. Pu\xf2 essere utile nei casi in cui si verificano condizioni gravi che richiedono l'interruzione immediata del flusso del programma."]}),"\n",(0,o.jsx)(i.p,{children:"Il miglioramento della gestione degli errori e dei messaggi di errore riduce gli attriti per gli utenti e ha un impatto significativo sull'esperienza dell'utente. Messaggi di errore chiari e informatici aiutano gli utenti a capire cosa \xe8 andato storto e come correggerlo, riducendo la frustrazione e migliorando la soddisfazione dell'utente."}),"\n",(0,o.jsx)(i.h3,{id:"testfield",children:"TestField"}),"\n",(0,o.jsxs)(i.p,{children:["La funzione TestField \xe8 ampiamente utilizzata nel codice standard di Business Central. In una singola istruzione possiamo testare il valore di una variabile e generare un messaggio di errore se il test fallisce.\nCon la funzione TestField, puoi verificare se un campo ha un valore o se \xe8 vuoto. Se il campo \xe8 vuoto, la funzione TestField generer\xe0 un errore di runtime.\n\xc8 inoltre possibile utilizzare la funzione TestField per verificare se un campo contiene un valore specifico o meno. In caso contrario, il campo generer\xe0 un errore.\nNel codice sottostante stiamo cercando di chiamare un metodo o una funzione chiamata '",(0,o.jsx)(i.strong,{children:"TestField"}),"' sull'oggetto '",(0,o.jsx)(i.strong,{children:"Customer"}),'\' con un argomento di tipo testo ("Salesperson Code"):']}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-al",children:'Customer.TestField("Salesperson Code");\n'})}),"\n",(0,o.jsxs)(i.p,{children:["Nel codice sottostante stiamo cercando di impostare il valore 'DK' nel campo \"Salesperson Code\" dell'oggetto '",(0,o.jsx)(i.strong,{children:"Customer"}),"' e successivamente chiamare una funzione o un metodo '",(0,o.jsx)(i.strong,{children:"TestField"}),"' sull'oggetto '",(0,o.jsx)(i.strong,{children:"Customer"}),"' con due argomenti, presumibilmente \"Salesperson Code\" e 'ZX'.\nCustomer.\"Salesperson Code\" := 'DK';\nCustomer.TestField(\"Salesperson Code\", 'ZX');"]}),"\n",(0,o.jsx)(i.h3,{id:"fielderror",children:"FieldError"}),"\n",(0,o.jsx)(i.p,{children:"FieldError \xe8 molto simile alla funzione TestField. Tuttavia, se TestField esegue un test e termina con un errore o un risultato OK, FieldError presume che il test sia gi\xe0 stato eseguito e il campo non ha superato il test.\nFieldError \xe8 progettato per visualizzare un messaggio di errore e quindi terminare il processo. Questo approccio \xe8 seguito in gran parte della logic Business Central standard, in particolare nelle codeunit di registrazione.\nQuesta funzione \xe8 comunemente utilizzata all'interno di controlli di validazione per indicare che un determinato campo non soddisfa una condizione specifica."}),"\n",(0,o.jsxs)(i.p,{children:["Questa funzione \xe8 utile quando desideri implementare controlli di validazione personalizzati per i dati nel tuo sistema. Assicurati di chiamare '",(0,o.jsx)(i.strong,{children:"FieldError"}),"' solo quando \xe8 necessario segnalare un errore specifico per un campo. In caso contrario, il codice potrebbe risultare pi\xf9 difficile da manutenere e meno comprensibile."]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-al",children:'If Item."Unit Price" < 10 then\n    Item.FieldError("Unit Price", \'must be greater than 10\');\n'})}),"\n",(0,o.jsx)(i.p,{children:"Poich\xe9 il messaggio di errore inizia con il nome del campo, dovremo fare attenzione che la nostra costante di testo dia strutturata in modo da rendere di facile lettura il messaggio di errore risultante."}),"\n",(0,o.jsx)(i.h2,{id:"strategie-di-gestione-degli-errori",children:"Strategie di gestione degli errori"}),"\n",(0,o.jsx)(i.p,{children:"La gestione degli errori \xe8 una parte essenziale dello sviluppo del software, poich\xe9 aiuta a migliorare l'affidabilit\xe0 e la robustezza delle applicazioni.\nIl miglioramento della gestione degli errori e dei messaggi di errore riduce agli attriti per gli utenti e ha un impatto significativo sull'esperienza dell'utente. Messaggi di errore chiari e informativi aiutano gli utenti a capire cosa \xe8 andato storto e come correggerlo, riducendo la frustrazione e migliorando la soddisfazione dell'utente.\nQuando un utente riceve una finestra di dialogo di errore mentre lavora in Business Central, viene emesso un segnale di telemetria che pu\xf2 essere registrato in una risorsa Azure Application Insights. Questi dati di telemetria consentono di identificare e analizzare dove e perch\xe9 si verifica l'errore."}),"\n",(0,o.jsxs)(i.table,{children:[(0,o.jsx)(i.thead,{children:(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.th,{children:"Se vuoi..."}),(0,o.jsx)(i.th,{children:"Utilizza..."})]})}),(0,o.jsxs)(i.tbody,{children:[(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.td,{children:"Esegui un'unit\xe0 di codice e decidi di fare qualcosa se si verifica un errore."}),(0,o.jsx)(i.td,{children:(0,o.jsx)(i.code,{children:"if not Codeunit.run() "})})]}),(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.td,{children:"Verifica la presenza di un errore e mostra una finestra di dialogo di errore all'utente."}),(0,o.jsx)(i.td,{children:(0,o.jsx)(i.code,{children:"Dialog.Error(Message: ErrorInfo)"})})]}),(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.td,{children:"Verifica la presenza di un errore e mostra una finestra di dialogo di errore all'utente con informazioni di supporto aggiuntive."}),(0,o.jsx)(i.td,{children:"Utilizzo del tipo di dati ErrorInfo con il metodo"})]}),(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.td,{children:"Esegui convalide collettive in AL e non mostra all'utente una finestra di dialogo di errore per ciascuna di esse."}),(0,o.jsx)(i.td,{children:"Raccolta degli errori"})]}),(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.td,{children:"Cattura gli errori sollevati da altri metodi AL."}),(0,o.jsx)(i.td,{children:"Gestione degli errori utilizzando i metodi Try"})]}),(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.td,{children:"Rilevare errori/eccezioni generati durante le operazioni di interoperabilit\xe0 di .NET Framework (solo in locale)."}),(0,o.jsx)(i.td,{children:"Gestione delle eccezioni .NET utilizzando i metodi Try"})]}),(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.td,{children:"Gestire gli errori che si verificano nelle attivit\xe0 in background della pagina."}),(0,o.jsxs)(i.td,{children:["Il ",(0,o.jsx)(i.code,{children:"OnPageBackgroundTaskError"})," trigger della pagina"]})]}),(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.td,{children:"Registra un errore che si verifica all'interno di una transazione del database (quel rollback)."}),(0,o.jsx)(i.td,{children:"Registrare l'errore in una nuova sessione utilizzando una sessione in background oppure registrare l'errore nella telemetria"})]})]})]}),"\n",(0,o.jsx)(i.h2,{id:"link-utili",children:"Link utili"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:(0,o.jsx)(i.a,{href:"https://learn.microsoft.com/it-it/dynamics365/business-central/dev-itpro/developer/devenv-al-error-handling",children:"Error Handling"})}),"\n"]})]})}function u(e={}){const{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);