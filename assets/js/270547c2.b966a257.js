"use strict";(self.webpackChunkthomascristofaro_learning=self.webpackChunkthomascristofaro_learning||[]).push([[2951],{9778:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"business-central/al-language/events","title":"Eventi","description":"I punti di innesto rappresentano inserzioni di codice personalizzato all\'interno di una procedura. Questi devono essere definiti e anticipati dal creatore della procedura principale. Consentono di collegarsi all\'applicazione principale senza apportare modifiche dirette al codice esistente. Inoltre, possono essere sottoscritti pi\xf9 volte da diverse applicazioni.","source":"@site/docs/business-central/03-al-language/98-events.md","sourceDirName":"business-central/03-al-language","slug":"/business-central/al-language/events","permalink":"/learning/docs/business-central/al-language/events","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":98,"frontMatter":{},"sidebar":"businessCentralSidebar","previous":{"title":"Funzioni utili","permalink":"/learning/docs/business-central/al-language/function-utilities"},"next":{"title":"Data Type complessi","permalink":"/learning/docs/business-central/al-language/complex-data-type"}}');var o=i(74848),r=i(28453);const a={},s="Eventi",l={},c=[{value:"Implementare gli eventi",id:"implementare-gli-eventi",level:3},{value:"Pubblicare un evento (event Publisher)",id:"pubblicare-un-evento-event-publisher",level:3},{value:"I tipi di evento",id:"i-tipi-di-evento",level:4},{value:"Generare un evento (Raise event)",id:"generare-un-evento-raise-event",level:3},{value:"Sottoscrivere un evento (event Subscriber)",id:"sottoscrivere-un-evento-event-subscriber",level:3},{value:"Sottoscrivere un evento - Note tecniche",id:"sottoscrivere-un-evento---note-tecniche",level:3},{value:"Trigger o Eventi?",id:"trigger-o-eventi",level:2},{value:"Link Utili:",id:"link-utili",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"eventi",children:"Eventi"})}),"\n",(0,o.jsx)(n.p,{children:"I punti di innesto rappresentano inserzioni di codice personalizzato all'interno di una procedura. Questi devono essere definiti e anticipati dal creatore della procedura principale. Consentono di collegarsi all'applicazione principale senza apportare modifiche dirette al codice esistente. Inoltre, possono essere sottoscritti pi\xf9 volte da diverse applicazioni."}),"\n",(0,o.jsx)(n.p,{children:"L'utilizzo degli eventi costituisce un concetto consolidato nella programmazione, agevolando gli aggiornamenti delle applicazioni e riducendo, se non eliminando, la necessit\xe0 di apportare modifiche al codice delle applicazioni personalizzate in risposta a cambiamenti nella piattaforma dell'applicazione. Gli eventi favoriscono la separazione delle funzionalit\xe0 personalizzate dalla logica di business dell'applicazione, consentendo di intercettare tali funzionalit\xe0 senza dover modificare il codice originale."}),"\n",(0,o.jsx)(n.p,{children:"Grazie all'adozione degli eventi, le modifiche al codice dell'applicazione principale hanno un impatto minimo sulle personalizzazioni. Di conseguenza, si riducono i costi associati a modifiche e aggiornamenti del codice."}),"\n",(0,o.jsx)(n.h3,{id:"implementare-gli-eventi",children:"Implementare gli eventi"}),"\n",(0,o.jsx)(n.p,{children:"Per implementare gli eventi, effettuare i seguenti passaggi:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Pubblicare l'evento"}),": creare e configurare una funzione."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Generare l'evento"}),": aggiungere il codice che chiama la funzione autore dell'evento"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Eseguire la sottoscrizione all'evento"}),": aggiungere una o pi\xf9 funzioni sottoscrittore."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"pubblicare-un-evento-event-publisher",children:"Pubblicare un evento (event Publisher)"}),"\n",(0,o.jsx)(n.p,{children:"Un evento \xe8 una dichiarazione di un'occorrenza di modifica. Tale dichiarazione viene eseguita da una funzione AL, denominata autore di eventi. L'oggetto che contiene la funzione di creazione dell'evento \xe8 denominato autore (o Publisher)."}),"\n",(0,o.jsx)(n.p,{children:"La differenza tra un autore di eventi e una funzione normale consiste nel fatto che un autore di eventi ha solo una firma, ma non esegue codice. La firma di una funzione \xe8 rappresentata solo dal nome con i relativi parametri e il tipo di valore restituito."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-al",children:"[IntegrationEvent(false, false)]\n\nlocal procedure OnBeforeSetDefaultSalesperson(var Customer: Record Customer; var IsHandled: Boolean)\nbegin\nend;\n"})}),"\n",(0,o.jsx)(n.h4,{id:"i-tipi-di-evento",children:"I tipi di evento"}),"\n",(0,o.jsx)(n.p,{children:"Sono previsti tre tipi di evento:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Business events"}),": un evento custom che non cambier\xe0 mai."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Integration events"}),": un evento custom che pu\xf2 cambiare."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Global events"}),": venti di sistema predefiniti che vengono generati automaticamente da varie codeunit dell'applicazione di base."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"generare-un-evento-raise-event",children:"Generare un evento (Raise event)"}),"\n",(0,o.jsx)(n.p,{children:"Puoi aggiungere del codice per richiamare il metodo dell'autore evento nel punto interessato dell'oggetto.\nLa dichiarazione (Publisher) ed il relativo richiamo dovrebbero logicamente stare all'interno dello stesso oggetto.\nIl Publisher va dichiarato come funzione locale.\nIl punto di richiamo (normalmente) \xe8 uno solo."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-al",children:'local procedure SetDefaultSalesperson()\nvar\n    UserSetup: Record "User Setup";\n    IsHandled: Boolean;\nbegin\n    IsHandled := false;\n    OnBeforeSetDefaultSalesperson(Rec, IsHandled);\n    if IsHandled then\n        exit;\n    \n    if not UserSetup.Get(UserId) then\n        exit;\n    \n    if UserSetup."Salespers./Purch. Code" <> \'\' then\n        Validate("Salesperson Code", UserSetup."Salespers./Purch. Code");\nend;\n'})}),"\n",(0,o.jsx)(n.h3,{id:"sottoscrivere-un-evento-event-subscriber",children:"Sottoscrivere un evento (event Subscriber)"}),"\n",(0,o.jsx)(n.p,{children:"Un sottoscrittore ascolta e gestisce un evento pubblicato. Esso stesso \xe8 una funzione AL che esegue la sottoscrizione a una funzione autore dell'evento. Tale funzione include la logica per la gestione dell'evento. Possono esserci pi\xf9 sottoscrittori allo stesso evento, ma nella stessa App \xe8 meglio utilizzarne uno soltanto."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-al",children:"[EventSubscriber(ObjectType::Table, Database::Customer, 'OnBeforeSetDefaultSalesperson', '', false, false)]\n\nlocal procedure OnBeforeSetDefaultSalesperson(var Customer: Record Customer; var IsHandled:: Boolean);\nbegin\n    Customer.\"Salesperson Code\" := 'ME';\n    IsHandled := true;\nend;\n"})}),"\n",(0,o.jsx)(n.h3,{id:"sottoscrivere-un-evento---note-tecniche",children:"Sottoscrivere un evento - Note tecniche"}),"\n",(0,o.jsx)(n.p,{children:"Il codice di sottoscrizione eventi va sempre inserito in Codeunit ed il nome della funzione pu\xf2 differire dal nome dell'evento.\nI parametri della funzione locale possono anche essere meno di quelli definiti, ma devono rispettarne l'ordine di definizione. (#)\nLa funzione \xe8 opportuno che sia definita come locale.\nPossono esserci pi\xf9 sottoscrittori allo stesso evento da diverse posizioni nel codice dell'applicazione.\nQuando viene generato un evento, i metodi del sottoscrittore vengono eseguiti uno alla volta senza un ordine particolare."}),"\n",(0,o.jsx)(n.admonition,{title:"Attenzione",type:"important",children:(0,o.jsx)(n.p,{children:"Non \xe8 possibile specificare l'ordine in cui vengono chiamati i metodi del sottoscrittore."})}),"\n",(0,o.jsxs)(n.p,{children:["La sottoscrizione di un evento pu\xf2 essere scritta manualmente, magari copiando il publisher e modificando ci\xf2 che serve.\nMa se non ho accesso al codice sorgente, posso utilizzare la funzione nativa che ne recupera la definizione direttamente dai simboli.\nDalla palette dei comandi lanciare il metodo: ",(0,o.jsx)(n.code,{children:"AL: Find Event"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"trigger-o-eventi",children:"Trigger o Eventi?"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{}),(0,o.jsx)(n.th,{children:"Triggers"}),(0,o.jsx)(n.th,{children:"Events"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.strong,{children:"Nomi e numerosit\xe0"})}),(0,o.jsx)(n.td,{children:"Predefiniti dal sistema"}),(0,o.jsx)(n.td,{children:"A discrezione dello sviluppatore"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.strong,{children:"Dichiarazione"})}),(0,o.jsx)(n.td,{children:"Non necessaria"}),(0,o.jsx)(n.td,{children:"A cura dello sviluppatore"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.strong,{children:"Parametri"})}),(0,o.jsx)(n.td,{children:"Predefiniti"}),(0,o.jsx)(n.td,{children:"Possono variare (+)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.strong,{children:"Richiamo"})}),(0,o.jsx)(n.td,{children:"Automatico"}),(0,o.jsx)(n.td,{children:"A cura dello sviluppatore"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.strong,{children:"Sottoscrizione"})}),(0,o.jsx)(n.td,{children:"Attraverso i metodi Trigger"}),(0,o.jsx)(n.td,{children:"A cura dello sviluppatore, in oggetti codeunit"})]})]})]}),"\n",(0,o.jsx)(n.h2,{id:"link-utili",children:"Link Utili:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://learn.microsoft.com/it-it/dynamics365/business-central/dev-itpro/developer/devenv-events-in-al",children:"Eventi"}),"\xf9"]}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://learn.microsoft.com/it-it/training/modules/events-triggers/4-event-based",children:"Architettura basata su eventi"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://learn.microsoft.com/it-it/training/modules/events-triggers/5-publish-subscribe",children:"Pubblicazione e sottoscrizione di eventi"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>s});var t=i(96540);const o={},r=t.createContext(o);function a(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);